title("Perfectly Precise Math Library Testing");

var tsver = "5.0-2";

var slow = false; // change to true to run slow tests

aload(["lib/tools/tools.js?v="+tsver, "lib/prec-math/prec-math.js?v="+tsver], function (){

//// Converters ////

function testnum(a, neg, dat, exp){
  test(a + ".neg", neg);
  test(a + ".dat", dat);
  test(a + ".exp", exp);
}

testnum('R.mknum("35.35")', false, "3535", -2);
testnum('R.mknum("0.0001")', false, "1", -4);
testnum('R.mknum("-0.0001")', true, "1", -4);
testnum('R.mknum("0.000012")', false, "12", -6);
testnum('R.mknum("-352534000")', true, "352534", 3);
testnum('R.mknum("")', false, "", 0);
testnum('R.mknum("10000")', false, "1", 4);

testnum('R.mknumnull("325")', false, "325", 0);
test('R.mknumnull(null)', null);

testnum('R.mknumint(1)', false, "1", 0);
testnum('R.mknumint(0)', false, "", 0);
testnum('R.mknumint(-1)', true, "1", 0);
testnum('R.mknumint(9007199254740991)', false, "9007199254740991", 0);

function teststr(a, x){
  test('R.tostr(' + a + ')', x);
}

teststr('R.num(true, "2534", 3)', "-2534000");
teststr('R.num(false, "123435", -3)', "123.435");
teststr('R.num(false, "123435", -10)', "0.0000123435");
teststr('R.num(true, "123435", -10)', "-0.0000123435");
teststr('R.num(false, "", 0)', "");

testnum('R.real(23.53)', false, "2353", -2);
testnum('R.real(-23.53)', true, "2353", -2);
testnum('R.real(0.0001)', false, "1", -4);
testnum('R.real("35.35")', false, "3535", -2);
testnum('R.real(R.num(false, "35", 2))', false, "35", 2);
test('R.real(".2343")', false);
test('R.real("aseewf")', false);
test('R.real("3..3532")', false);
test('R.real("--23432")', false);
test('R.real(true)', false);

test('R.realint(23.53)', false);
test('R.realint(-23.53)', false);
test('R.realint(0.0001)', false);
test('R.realint("35.35")', false);
test('R.realint(253)', 253);
test('R.realint("153")', 153);
test('R.realint(R.num(false, "35", 2))', 3500);
test('R.realint(R.num(false, "35", -2))', false);
test('R.realint(".2343")', false);
test('R.realint("aseewf")', false);
test('R.realint("3..3532")', false);
test('R.realint("--23432")', false);
test('R.realint(true)', false);

//// Int functions ////

test('R.gtInt("10", "10")', false);
test('R.gtInt("11", "10")', true);

test('R.addInt("5", "5")', "10");
test('R.addInt("43", "25343")', "25386");
test('R.addInt("25732842", "2")', "25732844");

test('R.subInt("5", "5")', "");
test('R.subInt("43", "25343")', "Error");
test('R.subInt("25732842", "2")', "25732840");
test('R.subInt("453", "403")', "50");

testnum('R.divInt("1", "3", 1)', false, "3", -1);
testnum('R.divInt("2", "3", 3)', false, "667", -3);
teststr('R.divInt("1257328472933423523", "63728579374218789798791", 100)', "0.0000197294288571898101264910536458231002542223526094727295673986069811829366435877221217623394342043");

//// Processing functions ////

testnum('R.trimr(R.num(true, "1500", 1))', true, "15", 3);
testnum('R.triml(R.num(true, "001500", 1))', true, "1500", 1);

test('R.cntr("0", "0000")', 4);
test('R.cntr("0", "10000")', 4);
test('R.cntr("0", "")', 0);
test('R.cntr("1", "0000")', 0);
test('R.cntl("0", "0000")', 4);
test('R.cntl("0", "00001")', 4);
test('R.cntl("0", "")', 0);
test('R.cntl("1", "0000")', 0);


function testarrf(a, x, f){
  if (f === udf)f = test;
  for (var i = 0; i < x.length; i++){
    f(a + "[" + i + "]", x[i]);
  }
}

function testarr(a){
  var x = $.sli(arguments, 1);
  testarrf(a, x);
}

testnum('R.matexp(R.num(true, "23", 3), R.num(false, "1", 5))[0]', true, "23", 3);
testnum('R.matexp(R.num(true, "23", 3), R.num(false, "1", 5))[1]', false, "100", 3);
testnum('R.matexp(R.num(false, "", 0), R.num(false, "23", 3))[0]', false, "", 0);
testnum('R.matexp(R.num(false, "", 0), R.num(false, "23", 3))[1]', false, "23000", 0);
testnum('R.matexp(R.num(false, "", 0), R.num(false, "23", -3))[0]', false, "", -3);
testnum('R.matexp(R.num(false, "", 0), R.num(false, "23", -3))[1]', false, "23", -3);

//testnum('R.pad(R.num(true, "23", 3), R.num(false, "1", 5))[0]', true, "023", 3);
//testnum('R.pad(R.num(true, "23", 3), R.num(false, "1", 5))[1]', false, "100", 3);

test('R.siz(R.mknum("2534235"))', 7);
test('R.siz(R.mknum("-100000"))', 6);
test('R.siz(R.mknum("1"))', 1);
test('R.siz(R.mknum("-0.1"))', 0);
test('R.siz(R.mknum("0.01"))', -1);
test('R.siz(R.mknum(""))', -Infinity);

test('R.fig(R.mknum("23432500"))', 6);
test('R.fig(R.mknum("0.0001"))', 1);
test('R.fig(R.mknum("100000"))', 1);
test('R.fig(R.mknum(""))', 0);

testnum('R.chke(1928375932743297520384903285129038401328501)', false, "19283759327432977", 26);
testnum('R.chke(Infinity)', false, "17976931348623157", 292);

test('R.byzero(R.mknum("0.5"))', false);
test('R.byzero(R.mknum("0.4999"))', true);
test('R.byzero(R.mknum("0.00001"), 4)', true);
test('R.byzero(R.mknum("0.00001"), 5)', false);
test('R.byzero(R.mknum("2.32232"), 3)', false);

//// Comparison functions ////

test('R.gt(R.num(false, "3", 0), R.num(false, "4", 0))', false);
test('R.gt(R.num(false, "3", 1), R.num(false, "4", 0))', true);
test('R.gt(R.num(true, "3", 1), R.num(false, "4", 0))', false);

testnum('R.add(R.num(false, "243", -2), R.num(false, "54215342412523", -10))', false, "54239642412523", -10);
testnum('R.add(R.num(false, "5", 0), R.num(false, "5", 0))', false, "1", 1);
testnum('R.add(R.num(false, "95", 0), R.num(false, "5", 0))', false, "1", 2);
testnum('R.add(R.num(false, "1", 2), R.num(false, "", 0))', false, "1", 2);
testnum('R.add(R.num(false, "", 0), R.num(false, "", 0))', false, "", 0);

testnum('R.sub(R.mknum("5"), R.mknum("5"))', false, "", 0);
testnum('R.sub(R.num(false, "155", 0), R.num(false, "135", 0))', false, "2", 1);
test('R.sub(R.num(true, "155", 0), R.num(false, "135", 0))', R.add(R.num(true, "155", 0), R.num(true, "135", 0)), R.is);
testnum('R.sub(R.num(false, "1", 2), R.num(false, "", 0))', false, "1", 2);
testnum('R.sub(R.num(false, "", 0), R.num(false, "", 0))', false, "", 0);

testnum('R.mul(R.mknum("15"), R.mknum("8"))', false, "12", 1);
testnum('R.mul(R.mknum("32"), R.mknum("3125"))', false, "1", 5);
teststr('R.mul(R.mknum("12573294723952903415"), R.mknum("23473284732827"))', "295136527085097957155099210904205");
teststr('R.mul(R.mknum("-12573294723952903415"), R.mknum("-23473284732827"))', "295136527085097957155099210904205");
teststr('R.mul(R.mknum("-12573294723952903415"), R.mknum("23473284732827"))', "-295136527085097957155099210904205");

testnum('R.div(R.mknum("1"), R.mknum("3"), 3)', false, "333", -3);
testnum('R.div(R.mknum("2"), R.mknum("3"), 3)', false, "667", -3);
testnum('R.div(R.mknum("5"), R.mknum("-9"), 3)', true, "556", -3);
testnum('R.div(R.mknum("-1531"), R.mknum("2534"), 10)', true, "6041831097", -10);
testnum('R.div(R.mknum("234.1283579328472893749275329"), R.mknum("28915723894729375347297"), 30)', false, "8096921896", -30);
testnum('R.div(R.mknum("2.1"), R.mknum("23"), 10)', false, "913043478", -10);

testnum('R.div(R.mknum("1"), R.mknum("1267650600228229401496703205376"), Infinity)', false, "7888609052210118054117285652827862296732064351090230047702789306640625", -100);
testnum('R.div(R.mknum("1"), R.mknum("10715086071862673209484250490600018105614048117055336074437503883703510511249361224931983788156958581275946729175531468251871452856923140435984577574698574803934567774824230985421074605062371141877954182153046474983581941267398767559165543946077062914571196477686542167660429831652624386837205668069376"), Infinity)', false, "933263618503218878990089544723817169617091446371708024621714339795966910975775634454440327097881102359594989930324242624215487521354032394841520817203930756234410666138325150273995075985901831511100490796265113118240512514795933790805178271125415103810698378854426481119469814228660959222017662910442798456169448887147466528006328368452647429261829862165202793195289493607117850663668741065439805530718136320599844826041954101213229629869502194514609904214608668361244792952034826864617657926916047420065936389041737895822118365078045556628444273925387517127854796781556346403714877681766899855392069265439424008711973674701749862626690747296762535803929376233833981046927874558605253696441650390625", -1000);
testnum('R.divInf(R.one(), R.mknum("8"))', false, "125", -3);


teststr('R.rnd(R.mknum("1253.3535"), 1)', "1253.4");
teststr('R.rnd(R.mknum("1253.3535"), 2)', "1253.35");
teststr('R.rnd(R.mknum("-1253.3535"), 2)', "-1253.35");
teststr('R.rnd(R.mknum("-1253.3535"), 10)', "-1253.3535");
teststr('R.rnd(R.mknum("-1253.3535"), -2)', "-1300");
teststr('R.rnd(R.mknum("1253.3535"), -4)', "");
teststr('R.rnd(R.mknum("-9999.535248923"))', "-10000");

teststr('R.cei(R.mknum("1253.3535"), 1)', "1253.4");
teststr('R.cei(R.mknum("1253.3535"), 2)', "1253.36");
teststr('R.cei(R.mknum("-1253.3535"), 2)', "-1253.35");
teststr('R.cei(R.mknum("-1253.3535"), 10)', "-1253.3535");
teststr('R.cei(R.mknum("-1253.3535"), -2)', "-1200");
teststr('R.cei(R.mknum("1253.3535"), -4)', "10000");
teststr('R.cei(R.mknum("-9999.535248923"))', "-9999");

teststr('R.flr(R.mknum("1253.3535"), 1)', "1253.3");
teststr('R.flr(R.mknum("1253.3535"), 2)', "1253.35");
teststr('R.flr(R.mknum("-1253.3535"), 2)', "-1253.36");
teststr('R.flr(R.mknum("-1253.3535"), 10)', "-1253.3535");
teststr('R.flr(R.mknum("-1253.3535"), -2)', "-1300");
teststr('R.flr(R.mknum("1253.3535"), -4)', "");
teststr('R.flr(R.mknum("-9999.535248923"))', "-10000");

teststr('R.trn(R.mknum("1253.3535"), 1)', "1253.3");
teststr('R.trn(R.mknum("1253.3535"), 2)', "1253.35");
teststr('R.trn(R.mknum("-1253.3535"), 2)', "-1253.35");
teststr('R.trn(R.mknum("-1253.3535"), 10)', "-1253.3535");
teststr('R.trn(R.mknum("-1253.3535"), -2)', "-1200");
teststr('R.trn(R.mknum("1253.3535"), -4)', "");
teststr('R.trn(R.mknum("-9999.535248923"))', "-9999");

teststr('R.dec(R.mknum("23.45215"), -1)', "3.45215");
teststr('R.dec(R.mknum("23.45215"), 0)', "0.45215");
teststr('R.dec(R.mknum("23.45215"), 1)', "0.05215");
teststr('R.dec(R.mknum("-23.45215"), -1)', "-3.45215");
teststr('R.dec(R.mknum("-23.45215"), 0)', "-0.45215");
teststr('R.dec(R.mknum("-23.45215"), 1)', "-0.05215");

if (slow){
  teststr('R.expTaylorFrac(R.mknum("0.1"), 1000)', "1.1051709180756476248117078264902466682245471947375187187928632894409679667476543029891433189707486536329171204854012445361537347145315787020068902997574505197515004866018321613310249357028047934586850494525645057122112661163770326284627042965573236001851138977093600284769443372730658853053002811154007820888910705403712481387499832879763074670691187054786420033729321209162792986139109713136202181843612999064371057442214441509033603625128922139492683515203569550353743656144372757405378395318324008280741587539066613515113982139135726893022699091000215648706791206777090283207508625041582515035160384730085864811589785637025471895631826720701700554046867490844416060621933317666818019314469778173494549497985045303406629427511807573756398858555866448811811806333247210364950515781422279735945226411105718464916466588898895425154437563356326922423993425668055030150187978568089290481077628854935380963680803086975643392286380110893491216896970405186147072881173903395370306903756052863966751655566156");
  
  teststr('R.expTaylorTerms(R.mknum("0.1"), 1000)', "1.1051709180756476248117078264902466682245471947375187187928632894409679667476543029891433189707486536329171204854012445361537347145315787020068902997574505197515004866018321613310249357028047934586850494525645057122112661163770326284627042965573236001851138977093600284769443372730658853053002811154007820888910705403712481387499832879763074670691187054786420033729321209162792986139109713136202181843612999064371057442214441509033603625128922139492683515203569550353743656144372757405378395318324008280741587539066613515113982139135726893022699091000215648706791206777090283207508625041582515035160384730085864811589785637025471895631826720701700554046867490844416060621933317666818019314469778173494549497985045303406629427511807573756398858555866448811811806333247210364950515781422279735945226411105718464916466588898895425154437563356326922423993425668055030150187978568089290481077628854935380963680803086975643392286380110893491216896970405186147072881173903395370306903756052863966751655566156");
  
  
  teststr('R.exp(R.mknum(""))', "1");
  teststr('R.exp(R.mknum(""), 100)', "1");
  teststr('R.exp(R.mknum("1"), 100)', "2.7182818284590452353602874713526624977572470936999595749669676277240766303535475945713821785251664274");
  teststr('R.exp(R.mknum("0.12534835"))', '1.1335432540909282');
}


testnum('R.lnReduce(R.mknum("0.00002534"))[0]', false, "1267", -3);
testnum('R.lnReduce(R.mknum("0.00002534"))[1]', true, "4", 0);
testnum('R.lnReduce(R.mknum("0.00002534"))[2]', true, "5", 0);
testnum('R.lnReduce(R.mknum("15342"))[0]', false, "7671", -4);
testnum('R.lnReduce(R.mknum("15342"))[1]', false, "5", 0);
testnum('R.lnReduce(R.mknum("15342"))[2]', false, "4", 0);

teststr('R.lnTaylor(R.mknum("0.1535"), 100)', "-1.8740547119548852078727439182287769070330964155183114915353873998476180836431252458133343233036025138");
teststr('R.lnTaylor(R.mknum("0.92534"), 100)', "-0.0775940414385536990214988528840119212271835869604118472786460077727807835150266587847523211055521824");
teststr('R.lnTaylor(R.mknum("1.02534"), 100)', "0.0250242649047354363878917564035902369489598630115714174198295900319760741323417519035193936050608806");


teststr('R.e(100)', "2.7182818284590452353602874713526624977572470936999595749669676277240766303535475945713821785251664274");
teststr('R.e(1000)', "2.7182818284590452353602874713526624977572470936999595749669676277240766303535475945713821785251664274274663919320030599218174135966290435729003342952605956307381323286279434907632338298807531952510190115738341879307021540891499348841675092447614606680822648001684774118537423454424371075390777449920695517027618386062613313845830007520449338265602976067371132007093287091274437470472306969772093101416928368190255151086574637721112523897844250569536967707854499699679468644549059879316368892300987931277361782154249992295763514822082698951936680331825288693984964651058209392398294887933203625094431173012381970684161403970198376793206832823764648042953118023287825098194558153017567173613320698112509961818815930416903515988885193458072738667385894228792284998920868058257492796104841984443634632449684875602336248270419786232090021609902353043699418491463140934317381436405462531520961836908887070167683964243781405927145635490613031072085103837505101157477041718986106873969655212671546889570350354");
teststr('R.e(1000)', "2.7182818284590452353602874713526624977572470936999595749669676277240766303535475945713821785251664274274663919320030599218174135966290435729003342952605956307381323286279434907632338298807531952510190115738341879307021540891499348841675092447614606680822648001684774118537423454424371075390777449920695517027618386062613313845830007520449338265602976067371132007093287091274437470472306969772093101416928368190255151086574637721112523897844250569536967707854499699679468644549059879316368892300987931277361782154249992295763514822082698951936680331825288693984964651058209392398294887933203625094431173012381970684161403970198376793206832823764648042953118023287825098194558153017567173613320698112509961818815930416903515988885193458072738667385894228792284998920868058257492796104841984443634632449684875602336248270419786232090021609902353043699418491463140934317381436405462531520961836908887070167683964243781405927145635490613031072085103837505101157477041718986106873969655212671546889570350354");

if (slow){
  testnum('R.fracResume(function (n){if (n == 0)return R.one(); return null;}, function (n){return null;}, 100).dat', false, "1", 0);
  test('R.fracResume(function (n){if (n == 0)return R.one(); return null;}, function (n){return null;}, 100).n', 0);
  testnum('R.fracResume(function (n){if (n == 0)return R.one(); return null;}, function (n){return null;}, 100).p0', false, "1", 0);
  testnum('R.fracResume(function (n){if (n == 0)return R.one(); return null;}, function (n){return null;}, 100).q0', false, "", 0);
  testnum('R.fracResume(function (n){if (n == 0)return R.one(); return null;}, function (n){return null;}, 100).p1', false, "1", 0);
  testnum('R.fracResume(function (n){if (n == 0)return R.one(); return null;}, function (n){return null;}, 100).q1', false, "1", 0);
  test('R.fracResume(function (n){if (n == 0)return R.one(); return null;}, function (n){return null;}, 100).bn1', null);
  
  testnum('var o = R.fracResume(function (n){return R.one();}, function (n){return R.one();}, 1000); o.dat', false, "16180339887498948482045868343656381177203091798057628621354486227052604628189024497072072041893911374847540880753868917521266338622235369317931800607667263544333890865959395829056383226613199282902678806752087668925017116962070322210432162695486262963136144381497587012203408058879544547492461856953648644492410443207713449470495658467885098743394422125448770664780915884607499887124007652170575179788341662562494075890697040002812104276217711177780531531714101170466659914669798731761356006708748071013179523689427521948435305678300228785699782977834784587822891109762500302696156170025046433824377648610283831268330372429267526311653392473167111211588186385133162038400522216579128667529465490681131715993432359734949850904094762132229810172610705961164562990981629055520852479035240602017279974717534277759277862561943208275051312181562855122248093947123414517022373580577278616008688382952304592647878017889921990270776903895321968198615143780314997411069260886742962267575605231727775203536139362", -1000);
  testnum('R.fracResume(function (n){return R.one();}, function (n){return R.one();}, 2000, o).dat', false, "161803398874989484820458683436563811772030917980576286213544862270526046281890244970720720418939113748475408807538689175212663386222353693179318006076672635443338908659593958290563832266131992829026788067520876689250171169620703222104321626954862629631361443814975870122034080588795445474924618569536486444924104432077134494704956584678850987433944221254487706647809158846074998871240076521705751797883416625624940758906970400028121042762177111777805315317141011704666599146697987317613560067087480710131795236894275219484353056783002287856997829778347845878228911097625003026961561700250464338243776486102838312683303724292675263116533924731671112115881863851331620384005222165791286675294654906811317159934323597349498509040947621322298101726107059611645629909816290555208524790352406020172799747175342777592778625619432082750513121815628551222480939471234145170223735805772786160086883829523045926478780178899219902707769038953219681986151437803149974110692608867429622675756052317277752035361393621076738937645560606059216589466759551900400555908950229530942312482355212212415444006470340565734797663972394949946584578873039623090375033993856210242369025138680414577995698122445747178034173126453220416397232134044449487302315417676893752103068737880344170093954409627955898678723209512426893557309704509595684401755519881921802064052905518934947592600734852282101088194644544222318891319294689622002301443770269923007803085261180754519288770502109684249362713592518760777884665836150238913493333122310533923213624319263728910670503399282265263556209029798642472759772565508615487543574826471814145127000602389016207773224499435308899909501680328112194320481964387675863314798571911397815397807476150772211750826945863932045652098969855567814106968372884058746103378105444390943683583581381131168993855576975484149144534150912954070050194775486163075422641729394680367319805861833918328599130396072014455950449779212076124785645916160837059498786006970189409886400764436170933417270919143365013716", -2000);
  
  testnum('R.sfracResume(function (n){if (n == 0)return R.one(); return null;}, 100).dat', false, "1", 0);
  test('R.sfracResume(function (n){if (n == 0)return R.one(); return null;}, 100).n', 0);
  testnum('R.sfracResume(function (n){if (n == 0)return R.one(); return null;}, 100).p0', false, "1", 0);
  testnum('R.sfracResume(function (n){if (n == 0)return R.one(); return null;}, 100).q0', false, "", 0);
  testnum('R.sfracResume(function (n){if (n == 0)return R.one(); return null;}, 100).p1', false, "1", 0);
  testnum('R.sfracResume(function (n){if (n == 0)return R.one(); return null;}, 100).q1', false, "1", 0);
  
  testnum('var o = R.sfracResume(function (n){return R.one();}, 1000); o.dat', false, "16180339887498948482045868343656381177203091798057628621354486227052604628189024497072072041893911374847540880753868917521266338622235369317931800607667263544333890865959395829056383226613199282902678806752087668925017116962070322210432162695486262963136144381497587012203408058879544547492461856953648644492410443207713449470495658467885098743394422125448770664780915884607499887124007652170575179788341662562494075890697040002812104276217711177780531531714101170466659914669798731761356006708748071013179523689427521948435305678300228785699782977834784587822891109762500302696156170025046433824377648610283831268330372429267526311653392473167111211588186385133162038400522216579128667529465490681131715993432359734949850904094762132229810172610705961164562990981629055520852479035240602017279974717534277759277862561943208275051312181562855122248093947123414517022373580577278616008688382952304592647878017889921990270776903895321968198615143780314997411069260886742962267575605231727775203536139362", -1000);
  testnum('R.sfracResume(function (n){return R.one();}, 2000, o).dat', false, "161803398874989484820458683436563811772030917980576286213544862270526046281890244970720720418939113748475408807538689175212663386222353693179318006076672635443338908659593958290563832266131992829026788067520876689250171169620703222104321626954862629631361443814975870122034080588795445474924618569536486444924104432077134494704956584678850987433944221254487706647809158846074998871240076521705751797883416625624940758906970400028121042762177111777805315317141011704666599146697987317613560067087480710131795236894275219484353056783002287856997829778347845878228911097625003026961561700250464338243776486102838312683303724292675263116533924731671112115881863851331620384005222165791286675294654906811317159934323597349498509040947621322298101726107059611645629909816290555208524790352406020172799747175342777592778625619432082750513121815628551222480939471234145170223735805772786160086883829523045926478780178899219902707769038953219681986151437803149974110692608867429622675756052317277752035361393621076738937645560606059216589466759551900400555908950229530942312482355212212415444006470340565734797663972394949946584578873039623090375033993856210242369025138680414577995698122445747178034173126453220416397232134044449487302315417676893752103068737880344170093954409627955898678723209512426893557309704509595684401755519881921802064052905518934947592600734852282101088194644544222318891319294689622002301443770269923007803085261180754519288770502109684249362713592518760777884665836150238913493333122310533923213624319263728910670503399282265263556209029798642472759772565508615487543574826471814145127000602389016207773224499435308899909501680328112194320481964387675863314798571911397815397807476150772211750826945863932045652098969855567814106968372884058746103378105444390943683583581381131168993855576975484149144534150912954070050194775486163075422641729394680367319805861833918328599130396072014455950449779212076124785645916160837059498786006970189409886400764436170933417270919143365013716", -2000);
}

if (slow){
  // order here matters!!
  teststr('R.acothCont(R.mknum("2"), 100)', "0.5493061443340548456976226184612628523237452789113747258673471668187471466093044834368078774068660444");
  teststr('R.acothCont(R.mknum("2"), 10)', "0.5493061443");
  teststr('R.acothCont(R.mknum("2"), 200)', "0.54930614433405484569762261846126285232374527891137472586734716681874714660930448343680787740686604439398501453297893287118400211296525991052640093538363870530158138459169068358968684942218047995187129");
  teststr('R.acothCont(R.mknum("2"), 1000)', "0.5493061443340548456976226184612628523237452789113747258673471668187471466093044834368078774068660443939850145329789328711840021129652599105264009353836387053015813845916906835896868494221804799518712851583979557605727959588753356735274700833877901111015851264734487803450532607528214340690181586866492888911834958273960659090745100150519118150611243263740991129955487262454482290267335044229825428742220595094285438237474335398065429147058010830605920007049127571959743844468399247151127865767664842672647625729606938247342966281397208278470789136155177584433051059234945219971531569127642868233441412494068411400317071955393446625728218755102225813780967486991058470792870267680879450487561116898868484843877177397567856491088508790621061175702905081636232794468624782459592621480398342117323534688618626327541016039166964027946426573436547566303229154592198748411115162882733766655911509824637628799566108925676695118741482169751273037122912467333433060940718263282714771383805252738897711466986662");
  
  teststr('R.acothCont(R.mknum("1534"), 2000)', "0.00065189057474170130325753135221595909099070336028605390407043164290411158750457359652546040916408479125682939047349396760716937369738602867912782471278774254720677955937502930642987040099782035183181718354811935280063517124663265166237942766645679350609135249551412548723007737820887532284378900103237504368369646037494101458166164662846528602453735269859305919716316379518494220854970543087402386110237182017753620009230682891198280976392945208391375036817194960873440941159049802732669826437798431987581053128789126864072298415258597735533056542396437342526968928787479941187806911951709157380580779691167715867675642026628950230436046040944350795255745799662147092312364508436497678929012084329939741961219124076924898518281145391501060503193347212069681546268174328214077282234189402196398089279091459564557662214926161671893642923432566792599518783003396330077748189794689321779442590962436951129854972881690460735875322672702828284693976563642004520092101319379022426336935149519798433547549439971004113652845508777391749646221486009653735020941643019000297000741241662117527289081311274311070420988066397225696055432185613910458354798148781360820753156456392895498706602119154300034187641694749926123661374995956401889356297145360905858940872556442296997103061696522161298831186358822464440115807149971892906889136331058860129992539206139126246413463425131122888367589755530007785972401553993630717223837016757478074891573979322385919678686495588301420470560254521583370593458005509180700353597373871779355938819102085480074933427209399085535529858811422509623149680834122599245954446122723626634865134360412278498327028092271317857042392753944915398404832373774497509179531985219810848973695163366565132951810936465073201143797668012287292685783883641003588571173580651223723622423917253910148093538651712747712075391193651465269915935552438015946423789896157627559607802132774143968413022761797940265948502305528602575712583455984870815390976855392140837726590424022101492252378377074240821");
  teststr('R.acothCont(R.mknum("1534"), 501)', "0.00065189057474170130325753135221595909099070336028605390407043164290411158750457359652546040916408479125682939047349396760716937369738602867912782471278774254720677955937502930642987040099782035183181718354811935280063517124663265166237942766645679350609135249551412548723007737820887532284378900103237504368369646037494101458166164662846528602453735269859305919716316379518494220854970543087402386110237182017753620009230682891198280976392945208391375036817194960873440941159049802732669826437798432");
  teststr('R.acothCont(R.mknum("1534"), 10)', "0.0006518906");
  teststr('R.acothCont(R.mknum("1534"), 1000)', "0.0006518905747417013032575313522159590909907033602860539040704316429041115875045735965254604091640847912568293904734939676071693736973860286791278247127877425472067795593750293064298704009978203518318171835481193528006351712466326516623794276664567935060913524955141254872300773782088753228437890010323750436836964603749410145816616466284652860245373526985930591971631637951849422085497054308740238611023718201775362000923068289119828097639294520839137503681719496087344094115904980273266982643779843198758105312878912686407229841525859773553305654239643734252696892878747994118780691195170915738058077969116771586767564202662895023043604604094435079525574579966214709231236450843649767892901208432993974196121912407692489851828114539150106050319334721206968154626817432821407728223418940219639808927909145956455766221492616167189364292343256679259951878300339633007774818979468932177944259096243695112985497288169046073587532267270282828469397656364200452009210131937902242633693514951979843354754944");
  teststr('R.acothCont(R.mknum("1534"), 2000)', "0.00065189057474170130325753135221595909099070336028605390407043164290411158750457359652546040916408479125682939047349396760716937369738602867912782471278774254720677955937502930642987040099782035183181718354811935280063517124663265166237942766645679350609135249551412548723007737820887532284378900103237504368369646037494101458166164662846528602453735269859305919716316379518494220854970543087402386110237182017753620009230682891198280976392945208391375036817194960873440941159049802732669826437798431987581053128789126864072298415258597735533056542396437342526968928787479941187806911951709157380580779691167715867675642026628950230436046040944350795255745799662147092312364508436497678929012084329939741961219124076924898518281145391501060503193347212069681546268174328214077282234189402196398089279091459564557662214926161671893642923432566792599518783003396330077748189794689321779442590962436951129854972881690460735875322672702828284693976563642004520092101319379022426336935149519798433547549439971004113652845508777391749646221486009653735020941643019000297000741241662117527289081311274311070420988066397225696055432185613910458354798148781360820753156456392895498706602119154300034187641694749926123661374995956401889356297145360905858940872556442296997103061696522161298831186358822464440115807149971892906889136331058860129992539206139126246413463425131122888367589755530007785972401553993630717223837016757478074891573979322385919678686495588301420470560254521583370593458005509180700353597373871779355938819102085480074933427209399085535529858811422509623149680834122599245954446122723626634865134360412278498327028092271317857042392753944915398404832373774497509179531985219810848973695163366565132951810936465073201143797668012287292685783883641003588571173580651223723622423917253910148093538651712747712075391193651465269915935552438015946423789896157627559607802132774143968413022761797940265948502305528602575712583455984870815390976855392140837726590424022101492252378377074240821");
  
  
  teststr('R.ln2(100)', "0.6931471805599453094172321214581765680755001343602552541206800094933936219696947156058633269964186875");
  teststr('R.ln2(1000)', "0.6931471805599453094172321214581765680755001343602552541206800094933936219696947156058633269964186875420014810205706857336855202357581305570326707516350759619307275708283714351903070386238916734711233501153644979552391204751726815749320651555247341395258829504530070953263666426541042391578149520437404303855008019441706416715186447128399681717845469570262716310645461502572074024816377733896385506952606683411372738737229289564935470257626520988596932019650585547647033067936544325476327449512504060694381471046899465062201677204245245296126879465461931651746813926725041038025462596568691441928716082938031727143677826548775664850856740776484514644399404614226031930967354025744460703080960850474866385231381816767514386674766478908814371419854942315199735488037516586127535291661000710535582498794147295092931138971559982056543928717000721808576102523688921324497138932037843935308877482597017155910708823683627589842589185353024363421436706118923678919237231467232172053401649256872747782344535348");
  teststr('R.ln2(10)', "0.6931471806");
  
  teststr('R.ln5(100)', "1.6094379124341003746007593332261876395256013542685177219126478914741789877076577646301338780931796108");
  teststr('R.ln5(1000)', "1.6094379124341003746007593332261876395256013542685177219126478914741789877076577646301338780931796107999663030217155628997240052293246761996336166174637057275521796374971832456534928562023415250572701551936008797773897256881935407127661547312218095279485212928213580597225676722852872404615894481783646713286739984246377595931894238439343534510509750544541947405013659870878673832131305729720406594853838387236627538765455627181615116599309152432073649116778639006758725857787663915838368239504254879562394840310019826971174909937414984809576210169110143788624033543215127231257345884615597872919808865706840200665998444726999732176811865176012202029784081090196475266997650689206589789133815717162072277745597705343203877874968293753611338009467640483302850021747748797080071434656163598970412589013376415240170058885987349484877879710543141783202014530620906157887906715981251674990414341721220369447000926855937597854921189617864328758768483220583559619967913166965093233885315853989823709854314631");
  teststr('R.ln5(10)', "1.6094379124");
  
  
  teststr('R.ln2and5(100)[0]', "0.6931471805599453094172321214581765680755001343602552541206800094933936219696947156058633269964186875");
  teststr('R.ln2and5(1000)[0]', "0.6931471805599453094172321214581765680755001343602552541206800094933936219696947156058633269964186875420014810205706857336855202357581305570326707516350759619307275708283714351903070386238916734711233501153644979552391204751726815749320651555247341395258829504530070953263666426541042391578149520437404303855008019441706416715186447128399681717845469570262716310645461502572074024816377733896385506952606683411372738737229289564935470257626520988596932019650585547647033067936544325476327449512504060694381471046899465062201677204245245296126879465461931651746813926725041038025462596568691441928716082938031727143677826548775664850856740776484514644399404614226031930967354025744460703080960850474866385231381816767514386674766478908814371419854942315199735488037516586127535291661000710535582498794147295092931138971559982056543928717000721808576102523688921324497138932037843935308877482597017155910708823683627589842589185353024363421436706118923678919237231467232172053401649256872747782344535348");
  teststr('R.ln2and5(10)[0]', "0.6931471806");
  
  teststr('R.ln2and5(100)[1]', "1.6094379124341003746007593332261876395256013542685177219126478914741789877076577646301338780931796108");
  teststr('R.ln2and5(1000)[1]', "1.6094379124341003746007593332261876395256013542685177219126478914741789877076577646301338780931796107999663030217155628997240052293246761996336166174637057275521796374971832456534928562023415250572701551936008797773897256881935407127661547312218095279485212928213580597225676722852872404615894481783646713286739984246377595931894238439343534510509750544541947405013659870878673832131305729720406594853838387236627538765455627181615116599309152432073649116778639006758725857787663915838368239504254879562394840310019826971174909937414984809576210169110143788624033543215127231257345884615597872919808865706840200665998444726999732176811865176012202029784081090196475266997650689206589789133815717162072277745597705343203877874968293753611338009467640483302850021747748797080071434656163598970412589013376415240170058885987349484877879710543141783202014530620906157887906715981251674990414341721220369447000926855937597854921189617864328758768483220583559619967913166965093233885315853989823709854314631");
  teststr('R.ln2and5(10)[1]', "1.6094379124");
  
  
  teststr('R.ln10(100)', "2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983");
  teststr('R.ln10(1000)', "2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849979");
  teststr('R.ln10(10)', "2.302585093");
}

teststr('R.ln(R.mknum("2.3523"))', "0.8553935729228489");
teststr('R.ln(R.mknum("152"), 20)', "5.02388052084627638826");
teststr('R.ln(R.mknum("53221251234"), 1002)', "24.697723612817104242636212702688059958075170746228267768852849775467053234540185070354288464687853894973162528038978377464084586341055702148294013806648944794787434400208829312497895515626953652947900576013737672169954193877390709928980154252144316325977119003799931317522493259670315212944952578122791146023627726044881044484971068733980865542468854757136455921738018466078348751400948215471341052602264655293074546459790966490243836333314772747135399075319035381105735530882742219394498754117330055426288970576698350761066317682288543318514769499007875047029062231721642869870201960547750566677922272186287677544112773268894312690955465580683948254469231941392326865405967680806025295601825779207662541869845099541941999059789117839991068724246769365824026056169965201139234025966674310166146799267012090836308475140198633012427432846533205048404276144905932396935379304983066338106124405660824365450122977614171762788802771418239648315843207157337730362880810769592343188503972901556999165334343005012");
teststr('R.ln(R.mknum(""))', "error");
teststr('R.ln(R.mknum("-10"))', "error");





});